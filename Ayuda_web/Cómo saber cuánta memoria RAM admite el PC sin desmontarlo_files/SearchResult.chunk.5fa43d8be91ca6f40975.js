(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{41:function(t,e,s){"use strict";var i={props:["post"],data:function(){return{device:defaults.device}}},n=s(0),r=Object(n.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"info-extra"},[s("ul",[s("li",{staticClass:"published-time"},[s("span",{staticClass:"icon-clock"}),t._v(" "+t._s(t.post.date))]),t._v(" "),"mobile"===t.device?s("li",{staticClass:"author"},[t._v("Por "),s("strong",[t._v(t._s(t.post.author.name))])]):s("li",{staticClass:"author"},[s("strong",[t._v(t._s(t.post.author.name))])]),t._v(" "),"mobile"!==t.device&&t.post.comments.count>0?s("li",{staticClass:"comments"},[s("i",{staticClass:"icon-comment"}),s("span",{staticClass:"count"},[t._v(t._s(t.post.comments.count))])]):t._e()])])}),[],!1,null,null,null);e.a=r.exports},42:function(t,e,s){"use strict";var i={props:["title","url"]},n=s(0),r=Object(n.a)(i,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("a",{attrs:{href:this.url}},[this._v("\n        "+this._s(this.title)+"\n    ")])])}),[],!1,null,null,null);e.a=r.exports},61:function(t,e,s){"use strict";s.r(e);var i=s(1);function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var s,i=l(t);if(e){var n=l(this).constructor;s=Reflect.construct(i,arguments,n)}else s=i.apply(this,arguments);return c(this,s)}}function c(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(c,t);var e,s,i,n=o(c);function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=n.call(this,t)).endPoint="/wp-json/gaz-v1/",e}return e=c,(s=[{key:"page",value:function(t){if(!this.loadingData){var e=this.parameters.context+"/"+t;void 0!==this.parameters.order&&(e=e.concat("/",this.parameters.order)),void 0!==this.parameters.criteria&&(e=e.concat("/",this.parameters.criteria)),this.action=e,this.load()}}}])&&r(e.prototype,s),i&&r(e,i),c}(s(6).a),h=s(42),f=s(15),p=s(41),d={props:["posts"],components:{PieceTitle:h.a,PieceCategoryPills:f.default,PieceInfoExtraPost:p.a},methods:{closeSearch:function(){i.a.$emit("closeSearchEvent")}}},v=s(0),m=Object(v.a)(d,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"articles"},t._l(t.posts,(function(e){return s("article",{staticClass:"news-item"},[s("header",[s("a",{attrs:{href:e.link,"data-postId":e.id,type:e.type},on:{click:t.closeSearch}},[s("img",{staticClass:"thumbnail",attrs:{src:e._embedded.featured.img,loading:"lazy",alt:e._embedded.featured.alt,srcset:e._embedded.featured.srcset,sizes:e._embedded.featured.sizes}})]),t._v(" "),s("piece-category-pills",{attrs:{categories:e._embedded.terms}})],1),t._v(" "),s("h2",{staticClass:"title",on:{click:t.closeSearch}},[s("a",{attrs:{href:e.link,"data-postId":e.id,type:e.type},domProps:{innerHTML:t._s(e.title.rendered)}})]),t._v(" "),s("piece-info-extra-post",{attrs:{post:e}}),t._v(" "),s("div",{staticClass:"excerpt",domProps:{innerHTML:t._s(e.excerpt.rendered)}}),t._v(" "),s("div",{staticClass:"read-more"},[s("a",{attrs:{href:e.link,"data-postId":e.id,type:e.type}},[t._v("Leer más")])]),t._v(" "),s("div",{staticClass:"observer-lazy-load-search-results"})],1)})),0)}),[],!1,null,null,null).exports,_=s(17),b=s(3),y=new _.a,g=new b.a,C={name:"SearchResult",components:{EventBus:i.a,PostList:m},data:function(){return{canSearch:!1,isResultVisible:!1,loadingPosts:!1,loadingScreen:!1,posts:[],page:1,postsPool:[],criteria:"",infiniteScrollHasItems:!0,searchHasResults:!1,waitInfiniteInterval:null}},created:function(){g.onClient()&&(y.setup(this.fetchData),y.setSelector("observer-lazy-load-search-results")),this.loader=new u({context:"find"}),i.a.$on("searchEvent",this.searchEvent),i.a.$on("closeSearchEvent",this.closeSearchEvent)},beforeDestroy:function(){i.a.$off("searchEvent",this.searchEvent),i.a.$off("closeSearchEvent",this.closeSearchEvent),g.onClient()&&y.disconnect()},computed:{searchContentClass:function(){return this.isResultVisible?"show-with-transition":"hide-with-transition"}},methods:{closeSearchEvent:function(){this.isResultVisible=!1,this.resetComponent()},searchEvent:function(t){var e=this;this.canSearch=!0,this.resetComponent(),this.loader.parameters.criteria=t.criteria,this.loader.parameters.order=t.order,this.criteria=t.criteria,this.isResultVisible=!0,this.loader.setCallBack((function(t){t.length<=0?e.infiniteScrollHasItems=!1:e.searchHasResults=!0,e.addPostsToPool(t),e.loadingPosts=!1,e.postStorage.setArray(t),e.$nextTick((function(){i.a.$emit("bind-post-links"),y.refresh()}))})),this.fetchData()},resetComponent:function(){this.posts=[],this.postsPool=[],this.page=1,this.infiniteScrollHasItems=!0,this.searchHasResults=!1},queryInfinitePage:function(){this.loader.page(this.page)},addPostsToPool:function(t){for(var e=0;e<t.length;e++)this.postsPool.push(t[e]);this.postStorage.setArray(t),this.page++},fetchData:function(){if((this.infiniteScrollHasItems||this.searchHasResults)&&!this.loadingScreen&&this.canSearch){if(this.loadingScreen=!0,this.postsPool.length<11&&this.queryInfinitePage(),this.postsPool.length>0){this.waitInfiniteInterval&&(clearInterval(this.waitInfiniteInterval),this.waitInfiniteInterval=null);var t=this.postsPool.shift();this.posts.push(t),this.$nextTick((function(){y.refresh()}))}else this.waitInfiniteInterval||(this.waitInfiniteInterval=setInterval(this.fetchData,200));this.loadingScreen=!1}}}},S=Object(v.a)(C,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isResultVisible?s("section",{staticClass:"search-content",class:t.searchContentClass},[s("header",[s("h1",{staticClass:"title"},[t._v("Resultados de la búsqueda: "+t._s(t.criteria))])]),t._v(" "),s("div",{staticClass:"search-result",attrs:{id:"searchresult"}},[s("div",{staticClass:"articles"},[s("post-list",{attrs:{posts:t.posts}})],1),t._v(" "),this.infiniteScrollHasItems||this.searchHasResults?t._e():s("div",[t._m(0)])])]):t._e()}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",[this._v("\n                    No se han encontrado resultados para la búsqueda.\n                ")])])}],!1,null,null,null);e.default=S.exports}}]);